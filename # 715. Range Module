package com.leetcode.problems;

import java.util.ArrayList;
import java.util.List;
import java.util.TreeMap;

public class Question715 {
	class RangeModule {
		TreeMap<Integer, Integer> map;

		public RangeModule() {
			this.map = new TreeMap<>();
		}

		public void addRange(int left, int right) {
			if (left == right)
				return;
			List<Integer> list = new ArrayList<>();
			for (int l : map.keySet()) {
				int r = map.get(l);
				if (r < left || l > right)
					continue;
				else {
					left = Math.min(left, l);
					right = Math.max(right, r);
					list.add(l);
				}
			}
			for (int i : list)
				map.remove(i);
			map.put(left, right);
		}

		public boolean queryRange(int left, int right) {
			Integer l = map.floorKey(left);
			if (l == null)
				return false;
			return map.get(l) >= right;
		}

		public void removeRange(int left, int right) {
			addRange(left, right);
			Integer l = map.floorKey(left);
			if (l != null) {
				int r = map.get(l);
				map.remove(l);
				addRange(l, left);
				addRange(right, r);
			}
		}
	}

	/**
	 * Your RangeModule object will be instantiated and called as such: RangeModule
	 * obj = new RangeModule(); obj.addRange(left,right); boolean param_2 =
	 * obj.queryRange(left,right); obj.removeRange(left,right);
	 */
}
