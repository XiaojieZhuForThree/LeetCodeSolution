class Solution {
	Map<Integer, Integer> map = new HashMap<>();
	int i = 1;

	public int numSquares(int n) {
		for (; i * i <= n; i++) {
			map.put(i * i, 1);
		}
		if (i * i == n) {
			return 1;
		} else {
			return rec(n);
		}
	}

	private int rec(int n) {
		if (n == 0) {
			return 0;
		}
		if (map.containsKey(n)) {
			return map.get(n);
		}
		int ans = n;
		for (int i = 1; i*i <= n; i++) {
			ans = Math.min(ans, 1 + rec(n - i * i));
		}
		map.put(n, ans);
		return ans;
	}
}
