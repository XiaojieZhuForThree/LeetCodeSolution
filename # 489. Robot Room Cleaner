package com.leetcode.problems;

import java.util.HashSet;
import java.util.Set;

import com.leetcode.api.Robot;

public class Question489 {
	class Solution {
		int[][] dirs = new int[][] { { 1, 0 }, { 0, -1 }, { -1, 0 }, { 0, 1 } };
		Set<String> set = new HashSet<>();

		public void cleanRoom(Robot robot) {
			dfs(robot, 0, 0, 0);
		}

		private void dfs(Robot robot, int i, int j, int dir) {
			if (!set.add(makeKey(i, j, dir))) {
				return;
			}
			robot.clean();
			for (int k = 0; k < 4; k++) {
				if (robot.move()) {
					int index = (dir + k) % 4;
					int[] next = dirs[index];
					dfs(robot, i + next[0], j + next[1], index);
					robot.turnRight();
					robot.turnRight();
					robot.move();
					robot.turnLeft();
					robot.turnLeft();
				}
				robot.turnRight();
			}
			return;
		}

		private String makeKey(int i, int j, int dir) {
			return i + ", " + j + ", " + dir;
		}
	}
}
