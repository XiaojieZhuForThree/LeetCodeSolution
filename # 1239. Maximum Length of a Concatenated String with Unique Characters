package problems;

import java.util.HashSet;
import java.util.List;
import java.util.Set;

public class Question1239 {
	class Solution {
		private int ans = 0;

		public int maxLength(List<String> arr) {
			dfs(arr, 0, 0, new HashSet<>());
			return ans;
		}

		private void dfs(List<String> arr, int curLen, int i, Set<Character> seen) {
			if (i == arr.size()) {
				ans = Math.max(curLen, ans);
				return;
			}
			String s = arr.get(i);
			if (!isValid(s)) {
				dfs(arr, curLen, i + 1, seen);
				return;
			}
			for (char c : s.toCharArray()) {
				if (seen.contains(c)) {
					dfs(arr, curLen, i + 1, seen);
					return;
				}
			}
			dfs(arr, curLen, i + 1, seen);
			for (char c : s.toCharArray()) {
				seen.add(c);
			}
			dfs(arr, curLen + s.length(), i + 1, seen);
			for (char c : s.toCharArray()) {
				seen.remove(c);
			}
		}

		private boolean isValid(String s) {
			Set<Character> set = new HashSet<>();
			for (char c : s.toCharArray()) {
				if (set.contains(c)) {
					return false;
				}
				set.add(c);
			}
			return true;
		}
	}
}
