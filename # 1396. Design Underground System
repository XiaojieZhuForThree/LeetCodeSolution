package com.leetcode.problems;

import java.util.HashMap;
import java.util.Map;

public class Question1396 {
	class UndergroundSystem {
		Map<String, Integer> durations;
		Map<String, Integer> times;
		Map<Integer, String> checkIns;
		Map<Integer, Integer> startTime;

		public UndergroundSystem() {
			durations = new HashMap<>();
			times = new HashMap<>();
			checkIns = new HashMap<>();
			startTime = new HashMap<>();
		}

		public void checkIn(int id, String stationName, int t) {
			checkIns.put(id, stationName);
			startTime.put(id, t);
		}

		public void checkOut(int id, String stationName, int t) {
			int start = startTime.get(id);
			int duration = t - start;
			String trip = checkIns.get(id) + "->" + stationName;
			durations.put(trip, durations.getOrDefault(trip, 0) + duration);
			times.put(trip, times.getOrDefault(trip, 0) + 1);
		}

		public double getAverageTime(String startStation, String endStation) {
			String trip = startStation + "->" + endStation;
			int duration = durations.get(trip);
			int time = times.get(trip);
			return (double) duration / time;
		}
	}

	/**
	 * Your UndergroundSystem object will be instantiated and called as such:
	 * UndergroundSystem obj = new UndergroundSystem();
	 * obj.checkIn(id,stationName,t); obj.checkOut(id,stationName,t); double param_3
	 * = obj.getAverageTime(startStation,endStation);
	 */
}
