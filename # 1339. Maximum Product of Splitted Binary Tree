package problems;

public class Question1339 {
	class Solution {
		long ans = Integer.MIN_VALUE;
		long sum;

		public int maxProduct(TreeNode root) {
			sum = sum(root);
			helper(root);
			return (int) (ans % (long) (1e9 + 7));
		}

		private long sum(TreeNode node) {
			if (node == null) {
				return 0;
			}
			return node.val + sum(node.left) + sum(node.right);
		}

		private void helper(TreeNode node) {
			if (node == null) {
				return;
			}
			helper(node.left);
			helper(node.right);
			int nl = node.left == null ? 0 : node.left.val;
			int nr = node.right == null ? 0 : node.right.val;
			long val1 = ((sum - nl) * nl);
			long val2 = ((sum - nr) * nr);
			ans = Math.max(ans, Math.max(val1, val2));
			node.val = node.val + nl + nr;
		}
	}
}
