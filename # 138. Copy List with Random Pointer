package com.leetcode.problems;

import java.util.HashMap;
import java.util.Map;

import com.leetcode.api.Node;

public class Question138 {
	class Solution {
		public Node copyRandomList(Node head) {
			Map<Node, Node> map = new HashMap<>();
			Node dummy = head;
			while (dummy != null) {
				map.put(dummy, new Node(dummy.val));
				dummy = dummy.next;
			}
			dummy = head;
			while (dummy != null) {
				Node next = dummy.next;
				if (next != null) {
					map.get(dummy).next = map.get(next);
				}
				Node random = dummy.random;
				if (random != null) {
					map.get(dummy).random = map.get(random);
				}
				dummy = dummy.next;
			}
			return map.get(head);
		}
	}
}
